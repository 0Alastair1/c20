name: weapon
id: weap
parentName: item
invaderStructName: Weapon
comments:
  en: Used for both weildable weapons and those attached to [vehicles][vehicle].
  fields:
    - name: weapon flags
      en: ...
      fields:
        - name: vertical heat display
          en: ...
        - name: mutually exclusive triggers
          en: ...
        - name: attacks automatically on bump
          en: ...
        - name: must be readied
          en: ...
        - name: doesn't count toward maximum
          en: >
            Used for weapons like the oddball and flag which technically count
            as a third carried weapon, despite the game having a soft limit of
            2 held weapons (scripts and mods aside).
        - name: aim assists only when zoomed
          en: ...
        - name: prevents grenade throwing
          en: ...
        - name: must be picked up
          en: ...
        - name: holds triggers when dropped
          en: ...
        - name: prevents melee attack
          en: ...
        - name: detonates when dropped
          en: >
            Causes the weapon to explode using its [item][] _detonation effect_
            after being dropped. This is used to make the singleplayer fuel rod
            gun and energy sword explode when the enemies who carry them die.
        - name: cannot fire at maximum age
          en: ...
        - name: secondary trigger overrides grenades
          en: ...
        - name: obsolete does not depower active camo in multilplayer
          en: ...
        - name: enables integrated night vision
          en: ...
        - name: ais use weapon melee damage
          en: ...
    - name: label
      en: ...
    - name: secondary trigger mode
      en: ...
      options:
        - name: normal
          en: ...
        - name: slaved to primary
          en: ...
        - name: inhibits primary
          en: ...
        - name: loads alterate ammunition
          en: ...
        - name: loads multiple primary ammunition
          en: ...
    - name: maximum alternate shots loaded
      en: ...
    - name: weapon a in
      en: ...
      options:
        - name: none
          en: ...
        - name: heat
          en: ...
        - name: primary ammunition
          en: ...
        - name: secondary ammunition
          en: ...
        - name: primary rate of fire
          en: ...
        - name: secondary rate of fire
          en: ...
        - name: ready
          en: ...
        - name: primary ejection port
          en: ...
        - name: secondary ejection port
          en: ...
        - name: overheated
          en: ...
        - name: primary charged
          en: ...
        - name: secondary charged
          en: ...
        - name: illumination
          en: ...
        - name: age
          en: ...
        - name: integrated light
          en: ...
        - name: primary firing
          en: ...
        - name: secondary firing
          en: ...
        - name: primary firing on
          en: ...
        - name: secondary firing on
          en: ...
    - name: weapon b in
      en: ...
      options:
        - name: none
          en: ...
        - name: heat
          en: ...
        - name: primary ammunition
          en: ...
        - name: secondary ammunition
          en: ...
        - name: primary rate of fire
          en: ...
        - name: secondary rate of fire
          en: ...
        - name: ready
          en: ...
        - name: primary ejection port
          en: ...
        - name: secondary ejection port
          en: ...
        - name: overheated
          en: ...
        - name: primary charged
          en: ...
        - name: secondary charged
          en: ...
        - name: illumination
          en: ...
        - name: age
          en: ...
        - name: integrated light
          en: ...
        - name: primary firing
          en: ...
        - name: secondary firing
          en: ...
        - name: primary firing on
          en: ...
        - name: secondary firing on
          en: ...
    - name: weapon c in
      en: ...
      options:
        - name: none
          en: ...
        - name: heat
          en: ...
        - name: primary ammunition
          en: ...
        - name: secondary ammunition
          en: ...
        - name: primary rate of fire
          en: ...
        - name: secondary rate of fire
          en: ...
        - name: ready
          en: ...
        - name: primary ejection port
          en: ...
        - name: secondary ejection port
          en: ...
        - name: overheated
          en: ...
        - name: primary charged
          en: ...
        - name: secondary charged
          en: ...
        - name: illumination
          en: ...
        - name: age
          en: ...
        - name: integrated light
          en: ...
        - name: primary firing
          en: ...
        - name: secondary firing
          en: ...
        - name: primary firing on
          en: ...
        - name: secondary firing on
          en: ...
    - name: weapon d in
      en: ...
      options:
        - name: none
          en: ...
        - name: heat
          en: ...
        - name: primary ammunition
          en: ...
        - name: secondary ammunition
          en: ...
        - name: primary rate of fire
          en: ...
        - name: secondary rate of fire
          en: ...
        - name: ready
          en: ...
        - name: primary ejection port
          en: ...
        - name: secondary ejection port
          en: ...
        - name: overheated
          en: ...
        - name: primary charged
          en: ...
        - name: secondary charged
          en: ...
        - name: illumination
          en: ...
        - name: age
          en: ...
        - name: integrated light
          en: ...
        - name: primary firing
          en: ...
        - name: secondary firing
          en: ...
        - name: primary firing on
          en: ...
        - name: secondary firing on
          en: ...
    - name: ready time
      en: ...
    - name: ready effect
      en: ...
    - name: heat recovery threshold
      en: ...
    - name: overheated threshold
      en: ...
    - name: heat detonation threshold
      en: ...
    - name: heat detonation fraction
      en: ...
    - name: heat loss per second
      en: ...
    - name: heat illumination
      en: ...
    - name: overheated
      en: ...
    - name: detonation
      en: ...
    - name: player melee damage
      en: ...
    - name: player melee response
      en: ...
    - name: actor firing parameters
      en: ...
    - name: near reticle range
      en: ...
    - name: far reticle range
      en: ...
    - name: intersection reticle range
      en: ...
    - name: magnification levels
      en: ...
    - name: magnification range
      en: ...
    - name: autoaim angle
      en: >
        Determines the aiming cone where projectiles paths will be pulled towards
        the target. This is the "red reticle" angle.
    - name: autoaim range
      en: The maximum range of the autoaim cone.
    - name: magnetism angle
      en: >
        For controller input, sets the angle where crosshair "stickiness" becomes
        a factor and aiming direction automatically tracks targets.
    - name: magnetism range
      en: The maximum target distance for magnetism to apply.
    - name: deviation angle
      en: >
        Used for vehicle weapons to control the maximum angle of deviation when
        the aiming direction does not match the direction the weapon is facing.
        For example, the Ghost's deviation angle of 45 degrees allows the driver
        to fire in the direction they are aiming even if the Ghost has not yet
        turned to face that direction. Compare this to the Warthog gun's tighter
        10 degree limit.
    - name: movement penalized
      en: >
        **Unused**. This was meant to slow the player when using certain weapons
        like the rocket launcher, but it has no effect ingame regardless of the
        options, penalty values used, or game mode.
      options:
        - name: always
          en: No effect.
        - name: when zoomed
          en: No effect.
        - name: when zoomed or reloading
          en: No effect.
    - name: forward movement penalty
      en: No effect.
    - name: sideways movement penalty
      en: No effect.
    - name: minimum target range
      en: ...
    - name: looking time modifier
      en: ...
    - name: light power on time
      en: ...
    - name: light power off time
      en: ...
    - name: light power on effect
      en: ...
    - name: light power off effect
      en: ...
    - name: age heat recovery penalty
      en: ...
    - name: age rate of fire penalty
      en: ...
    - name: age misfire start
      en: ...
    - name: age misfire chance
      en: ...
    - name: first person model
      en: ...
    - name: first person animations
      en: ...
    - name: hud interface
      en: ...
    - name: pickup sound
      en: ...
    - name: zoom in sound
      en: ...
    - name: zoom out sound
      en: ...
    - name: active camo ding
      en: ...
    - name: active camo regrowth rate
      en: ...
    - name: weapon type
      en: ...
      options:
        - name: undefined
          en: ...
        - name: shotgun
          en: ...
        - name: needler
          en: ...
        - name: plasma pistol
          en: ...
        - name: plasma rifle
          en: ...
    - name: more predicted resources
      en: ...
    - name: magazines
      en: ...
      fields:
        - name: flags
          en: ...
          fields:
            - name: wastes rounds when reloaded
              en: ...
            - name: every round must be chambered
              en: ...
        - name: rounds recharged
          en: ...
        - name: rounds total initial
          en: ...
        - name: rounds total maximum
          en: ...
        - name: rounds loaded maximum
          en: ...
        - name: reload time
          en: ...
        - name: rounds reloaded
          en: ...
        - name: chamber time
          en: ...
        - name: reloading effect
          en: ...
        - name: chambering effect
          en: ...
        - name: magazine objects
          en: ...
          fields:
            - name: rounds
              en: ...
            - name: equipment
              en: ...
    - name: triggers
      en: ...
      fields:
        - name: flags
          en: Various flags that change the behavior of the given trigger.
          fields:
            - name: tracks fired projectile
              en: ...
            - name: random firing effects
              en: >
                If false the firing effects in the firing effects block will be
                picked in order. If true they will be picked randomly.
            - name: can fire with partial ammo
              en: >
                The weapon will be able to fire as long as the magazine content is
                above `0`.
            - name: does not repeat automatically
              en: >
                Disables repeat fires while holding the trigger. If true you need
                to release the trigger before it can fire again.
                Bug: This breaks if the weapon is a charge weapon with the _discharging spews_ behavior.
                When the player is a client in multiplayer it will immediately start charging again as
                soon as it is fired potentially causing automatic firing behavior.
            - name: locks in on off state
              en: >
                Makes the trigger behave like a switch. Tap it to turn it on. Tap
                it again to turn it off.
            - name: projectiles use weapon origin
              en: >
                If true the projectiles will spawn at the third person `primary trigger`
                or `secondary trigger` [marker][gbxmodel#markers] instead of originating from the center
                of the first person view.
            - name: sticks when dropped
              en: >
                If true the weapon will keep the trigger state from the time it
                was dropped. If it was being held while dropped it will continue
                being held.
            - name: ejects during chamber
              en:  ...
            - name: discharging spews
              en: ...
            - name: analog rate of fire
              en: ...
            - name: use error when unzoomed
              en: >
                Makes the trigger always fire completely accurately when zoomed in.

            - name: projectile vector cannot be adjusted
              en: ...
            - name: projectiles have identical error
              en: >
                Makes it so that all projectiles that are fired simultaneously
                move in the same direction. Only affects triggers that have
                multiple projectiles per shot.
            - name: projectile is client side only
              en: >
                Makes it so that in multiplayer the projectile does is not syncronized
                over the network and is instead created by client trigger simulation.
        - name: rounds per second
          en: Determines the maximum rate of fire of the weapon.
        - name: acceleration time
          en: >
            The number of seconds required to hold the trigger in order to reach
            the final rate of fire. A value of `0` means the trigger will always
            use the final rate of fire.
        - name: deceleration time
          en: >
            The number of seconds required to release the trigger in order to
            reach the initial rate of fire. A value of `0` means the trigger will
            revert to the initial rate of fire the moment the trigger is released.
        - name: blurred rate of fire
          en: >
            The rate of fire needed to switch the object to its [~blur permutation][gbxmodel#permutations].
        - name: magazine
          en: >
            The index of the magazine which this trigger draws ammunition from.
            If no magazine is given (null), then the weapon effectively has an
            unlimited amount of rounds.
        - name: rounds per shot
          en: >
            This is the amount of ammo each trigger fire uses. Unless the "can
            fire with partial ammo" flag is set, the trigger cannot be fired if
            there is less than this much ammo remaining and will, instead, reload
            automatically. Firing with partial ammo with the partial ammo flag
            will result in the loaded ammo reaching 0 rather than a negative amount.
            A negative value results in the magazine gaining loaded rounds upon firing.
        - name: minimum rounds loaded
          en: >
            The magazine will automatically reload if less than this much ammo
            remains in the magazine, and the weapon cannot fire unless this much
            ammo is loaded. Unlike _rounds per shot_, this ignores the "can fire
            with partial ammo" flag.
        - name: rounds between tracers
          en: >
            The amount of projectiles not to give a contrail before giving one
            a contrail again.
        - name: firing noise
          en: >
            How loudly AI will perceive this trigger when it fires, determining
            how they will react (if at all).
          options:
            - name: silent
              en: ...
            - name: medium
              en: ...
            - name: loud
              en: ...
            - name: shout
              en: ...
            - name: quiet
              en: ...
        - name: error
          en: >
            The function of this field is unknown. It is **unused by the game**.
            Although labeled in [Guerilla][] as a range \[0, 1\], the pistol has a max
            value of 2. Setting this to 0 does not affect projectile spread.
        - name: error acceleration time
          en: >
            Affects how long it takes for the weapon to reach its maximum projectile
            error angle while holding the trigger. Can be negated using quick
            trigger taps.
        - name: error deceleration time
          en: >
            Affects how long it takes for the weapon to reach its minimum projectile
            error angle during a pause in firing.
        - name: charging time
          en: >
            The amount of time the user has to hold the trigger before the weapon
            is considered charged.
        - name: charged time
          en: >
            The amount of time it takes _after_ the weapon becomes charged before
            the overcharged behavior takes effect. **Unused if _overcharged action_
            is set to none.**
        - name: overcharged action
          en: >
            The reaction the weapon will have to the charged time running out.
          options:
            - name: none
              en: >
                Nothing happens and the gun will stay charged until the trigger
                is released.
            - name: explode
              en: >
                The weapon will detonate using its [item _detonation effect_](item#tag-field-detonation-effect).
            - name: discharge
              en: >
                Forces the gun to fire as it would have had the user let go
                of the trigger.
        - name: charged illumination
          en: ...
        - name: spew time
          en: >
            The amount of time the weapon will be forced to fire at its given
            firerate after overcharging.
        - name: charging effect
          en: ...
        - name: distribution function
          en: ...
          options:
            - name: point
              en: ...
            - name: horizontal fan
              en: >
                Causes projectiles to be spread out in a fan, which actually seems
                to be vertical.
        - name: projectiles per shot
          en: >
            Affects how many projectiles are produced by a single shot. For example,
            the shotgun has this value set to 15. Each projectile is scattered by error
            angle independently.
        - name: distribution angle
          en: >
            Affects the spread of projectiles when _projectiles per shot_ is
            greater than 1 and _distribution function_ is _fan_.
        - name: minimum error
          en: >
            Floor value for error angle. Even if the minimum error angle
            is 0, this value takes precedence. Note that this field receives a
            [hard-coded singleplayer adjustment][tool#hardcoded-tag-patches]
            at map compile time for the pistol.
        - name: error angle
          en: >
            Determines the minimum and maximum angle of the "error cone". The
            min angle is for when you begin firing, while the max is reached after
            a period of sustained fire. The values are shown in degrees in
            Guerilla, but internally stored in radians. Note that these fields
            receives [hard-coded singleplayer adjustments][tool#hardcoded-tag-patches]
            at map compile time for the pistol and plasma rifle.
        - name: first person offset
          en: >
            The relative offset from the first person camera the projectile spawns.
            X is front (+) and back (-), Y is left (+) and right (-), Z is up (+)
            and down (-).
        - name: projectile
          en: >
            The projectile that this trigger spawns when fired. If edited through
            tools other than guerilla it can spawn any object type.
        - name: ejection port recovery time
          en: ...
        - name: illumination recovery time
          en: ...
        - name: heat generated per round
          en: ...
        - name: age generated per round
          en: ...
        - name: overload time
          en: ...
        - name: illumination recovery rate
          en: ...
        - name: ejection port recovery rate
          en: ...
        - name: firing acceleration rate
          en: >
            Pre-calculated rate of firing rate increase, based on the
            _acceleration time_ field.
        - name: firing deceleration rate
          en: >
            Pre-calculated rate of firing rate decrease, based on the
            _deceleration time_ field.
        - name: error acceleration rate
          en: >
            Pre-calculated rate of error angle increase, based on the _error
            acceleration time_ field.
        - name: error deceleration rate
          en: >
            Pre-calculated rate of error angle decrease, based on the _error
            deceleration time_ field.
        - name: firing effects
          en: ...
          fields:
            - name: shot count lower bound
              en: ...
            - name: shot count upper bound
              en: ...
            - name: firing effect
              en: ...
            - name: misfire effect
              en: ...
            - name: empty effect
              en: ...
            - name: firing damage
              en: ...
            - name: misfire damage
              en: ...
            - name: empty damage
              en: ...
